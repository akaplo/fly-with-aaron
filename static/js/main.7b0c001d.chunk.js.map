{"version":3,"sources":["actions/actions.js","dashboard/TopBar.js","login/Login.jsx","flights/Flight.js","flights/UpcomingFlights.js","flights/JoinFlight.js","flights/CreateFlight.js","flights/DeleteFlightModal.js","flights/AllFlights.js","users/User.js","users/Users.js","dashboard/Dashboard.jsx","login/LoggedOut.js","users/AccessCheck.js","App.js","serviceWorker.js","index.js"],"names":["getAllUsers","axios","get","then","res","data","Items","getUser","email","Item","catch","e","console","error","addFlightDataToUser","user","flights","filter","f","includes","id","deleteFlight","delete","getJoinableFlights","userFlights","allFlights","Date","flight_datetime","map","fl","sortFlights","sort","a","b","aDate","bDate","arraysAreEqual","a1","a2","length","every","value","index","styles","makeStyles","theme","root","flexGrow","menuButton","marginRight","spacing","title","flex","display","justifyContent","name","breakpoints","up","marginLeft","width","logout","TopBar","classes","React","useState","anchorEl","setAnchorEl","handleClose","AppBar","position","Toolbar","variant","className","Typography","admin","Button","onClick","event","currentTarget","Menu","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","open","Boolean","onClose","MenuItem","disabled","weight","initCognitoSDK","signOut","auth","CognitoAuth","ClientId","AppWebDomain","TokenScopesArray","RedirectUriSignIn","RedirectUriSignOut","UserPoolId","AdvancedSecurityDataCollectionFlag","userhandler","onSuccess","log","onFailure","CognitoLogin","getSession","ConfirmCode","onConfirm","code","setCode","Input","inputProps","onChange","target","outlined","startAdornment","InputAdornment","InputLabel","button","color","confirmAccessCode","size","height","container","marginTop","alignItems","margin","Login","undefined","codeConfirmed","setCodeConfirmed","to","confirmed","props","flexDirection","fontStyle","isFull","fontSize","fontWeight","date","Flight","flight","showAll","moment","passengers","origin","destination","format","p","join","cost","headerText","marginBottom","UpcomingFlights","futureFlights","pastFlights","key","flightContainer","soonWarning","left","JoinFlight","refreshUser","upcomingFlights","flightToJoin","setFlightToJoin","showComeFlyingModal","setShowModal","joinFlightError","setJoinFlightError","handleSave","flightID","Promise","reject","put","concat","joinFlight","daysUntilFlight","Alert","severity","Tooltip","arrow","ComeFlyingModal","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","defaultProps","textSize","topMargin","input","CreateFlight","setDate","setOrigin","setDestination","setPassengers","allUsers","setAllUsers","showCreateModal","createFlightError","setCreateFlightError","useEffect","utils","MomentUtils","editFlight","post","createFlight","noValidate","autoComplete","ampm","toDate","onError","disablePast","defaultValue","Select","multiple","u","ConfirmationModal","CreateFlightModalWrapper","DeleteFlightModal","split","actions","AllFlights","flightToDelete","setFlightToDelete","flightToEdit","setFlightToEdit","Divider","IconButton","User","UserViewModal","Users","showUserModal","selectedUser","setSelectedUser","List","ListItem","Dashboard","getFlights","access_confirmed","LoggedOut","AccessCheck","userConfirmed","setConfirmed","confirmUser","AppNR","defaults","baseURL","setUser","setFlights","location","useLocation","updateUser","userToMutate","updatedUser","resolve","updateFlights","matches","hash","match","authToken","headers","common","JSON","parse","atob","userPromise","flightPromise","all","reses","updateUserWithFlights","path","exact","render","isPrivate","component","App","window","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message"],"mappings":"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","file":"static/js/main.7b0c001d.chunk.js","sourcesContent":["import axios from 'axios';\n\nexport const getAllFlights = () => axios.get('/flights');\n\nexport const getAllUsers = () => axios.get('/users').then(res => res.data.Items);\n\nexport const getUser = (email) => axios.get(`/users/${ email }`).then(res => res.data.Item).catch(e => console.error(e));\n\nexport const addFlightDataToUser = (user, flights) => {\n    if (user.flights) {\n        return {\n            ...user,\n            flights: flights.filter(f => user.flights.includes(f.id))\n        };\n    }\n};\n\nexport const getUpcomingFlights = (flights) => (\n    flights.filter(f => new Date(f.flight_datetime) > new Date())\n);\n\nexport const editUser = (email, phone, weight, flights) => {\n\n};\n\nexport const editFlight = (flight, id) => {\n    axios.put(`flights/${ id }`, flight)\n};\n\nexport const deleteFlight = (id) => {\n    axios.delete(`flights/${ id }`)\n};\n\n// Get the upcoming flights this user isn't already on\nexport const getJoinableFlights = (userFlights, allFlights) => {\n    // Return all flights whose IDs are NOT in this user's list of flights\n    return getUpcomingFlights(allFlights).filter(f => !userFlights.map(fl => fl.id).includes(f.id));\n};\n\nexport const joinFlight = (user, flightID) => {\n    if (!user.flights.includes(flightID)) {\n        return axios.put(`/users/${ user.email }`, {\n            flights: user.flights.map(f => f.id).concat([flightID])\n        });\n    } else {\n        return Promise.reject('User already on flight');\n    }\n};\n\nexport const createFlight = (flight) => axios.post('/flights', flight);\n\nexport const sortFlights = (flights) => flights.sort((a, b) => {\n    const aDate = new Date(a.flight_datetime);\n    const bDate = new Date(b.flight_datetime);\n    if (aDate < bDate) return -1;\n    if (aDate > bDate) return 1;\n    return 0;\n});\n\nexport const arraysAreEqual = (a1=[], a2=[]) => a1.length === a2.length && a1.sort().every(function(value, index) { return value === a2.sort()[index]});\n\nexport const confirmAccessCode = code => axios.get(`/code_validation/${ code }`);\n\nexport const confirmUser = (user, code) =>\n    axios.post(`/users/${ user.email }/code_confirmation`, {\n        code\n    });","import React, { useState } from 'react';\nimport { AppBar, Toolbar, Typography, Button, Menu, MenuItem } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { initCognitoSDK } from \"../login/Login\";\n\nconst styles = makeStyles(theme => ({\n    root: {\n        flexGrow: 1,\n    },\n    menuButton: {\n        marginRight: theme.spacing(2),\n    },\n    title: {\n        flexGrow: 1,\n    },\n    flex: {\n        display: 'flex',\n        justifyContent: 'space-between'\n    },\n    name: {\n        [theme.breakpoints.up('sm')]: {\n            marginLeft: theme.spacing(1),\n            width: 'auto',\n        },\n        color: '#fff'\n    },\n    logout: {\n        width: '100%'\n    }\n}));\nconst TopBar = ({ user }) => {\n    const classes = styles();\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    const handleMenu = event => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleLogout = () => {\n        initCognitoSDK().signOut();\n    };\n\n    return (\n        <AppBar position=\"static\">\n            <Toolbar variant={ 'dense' } className={ classes.flex }>\n                <Typography variant={ 'h5' } className={classes.name}>\n                    FlywithAaron\n                </Typography>\n                { user && user.admin &&\n                    <Typography variant={ 'h5' } className={classes.name}>\n                        Administrator View\n                    </Typography>\n                }\n                {\n                    user &&\n                    <div>\n                        <Button\n                            onClick={ handleMenu }\n                        >\n                            <Typography className={classes.name} >\n                                <span>{ user ? user.name : '' }</span>\n                            </Typography>\n                        </Button>\n                        <Menu\n                            anchorEl={ anchorEl }\n                            anchorOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right',\n                            }}\n                            keepMounted\n                            transformOrigin={{\n                                vertical: 'top',\n                                horizontal: 'right',\n                            }}\n                            open={ Boolean(anchorEl) }\n                            onClose={ handleClose }\n                        >\n                            <MenuItem disabled onClick={ handleClose }>{ user.email }</MenuItem>\n                            <MenuItem disabled onClick={ handleClose }>{ user.weight + 'lbs' || 'Missing weight' }</MenuItem>\n                            <MenuItem onClick={ handleClose }><span className={ classes.logout } onClick={ handleLogout }>Logout</span></MenuItem>\n                        </Menu>\n                    </div>\n                }\n            </Toolbar>\n        </AppBar>\n    );\n};\n\nexport default TopBar;\n","import React, { Fragment, useState} from 'react';\nimport {Button, Input, InputAdornment, InputLabel} from \"@material-ui/core\";\nimport { CognitoAuth } from 'amazon-cognito-auth-js';\nimport { confirmAccessCode } from \"../actions/actions\";\nimport { Redirect } from 'react-router-dom';\nimport TopBar from \"../dashboard/TopBar\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport VpnKeyIcon from '@material-ui/icons/VpnKey';\n\nexport const initCognitoSDK = () => {\n    const authData = {\n        ClientId : '6requ0b4e047k3nae12omq18v', // Your client id here\n        AppWebDomain : 'fly-with-aaron.auth.us-east-1.amazoncognito.com', // Exclude the \"https://\" part.\n        TokenScopesArray : ['openid','email','phone', 'aws.cognito.signin.user.admin', 'profile'],\n        RedirectUriSignIn : \"http://localhost:3000/dashboard\",\n        RedirectUriSignOut : \"http://localhost:3000/logout\",\n        UserPoolId : 'us-east-1_kIaLEFq20',\n        AdvancedSecurityDataCollectionFlag : false\n    };\n    const auth = new CognitoAuth(authData);\n    // You can also set state parameter\n    // auth.setState(<state parameter>);\n    auth.userhandler = {\n        onSuccess: () => console.log('successful login'),\n        onFailure: () => console.error('failed login?')\n        /** E.g.\n         onSuccess: function(result) {\n\t\t\t\talert(\"Sign in success\");\n\t\t\t\tshowSignedIn(result);\n\t\t\t},\n         onFailure: function(err) {\n\t\t\t\talert(\"Error!\" + err);\n\t\t\t}*/\n    };\n    // The default response_type is \"token\", uncomment the next line will make it be \"code\".\n    // auth.useCodeGrantFlow();\n    return auth;\n};\n\nconst CognitoLogin = () => {\n    let auth;\n    auth = initCognitoSDK();\n    auth.getSession();\n    return null;\n};\n\n\nconst ConfirmCode = ({ onConfirm }) => {\n    const classes = styles();\n    const [code, setCode] = useState('');\n    const handleSubmit = () => confirmAccessCode(code).then(() => onConfirm(true)).catch(() => onConfirm(false));\n    return (\n        <div className={ classes.code }>\n            <div>\n                <Input\n                    inputProps={{ 'aria-label': 'secret code' }}\n                    onChange={ e => setCode(e.target.value) }\n                    outlined\n                    startAdornment={ <InputAdornment position={ 'start' }><VpnKeyIcon/></InputAdornment>}\n                    value={ code }\n                />\n                <InputLabel>Access Code</InputLabel>\n            </div>\n            <Button\n                className={ classes.button }\n                color={ 'primary' }\n                onClick={ handleSubmit }\n                size={ 'small' }\n                variant={ 'contained' }\n            >\n                Confirm\n            </Button>\n        </div>\n    )\n};\n\nconst styles = makeStyles({\n    button: {\n        height: '2rem',\n        marginLeft: '2rem'\n    },\n    container: {\n        marginTop: '1rem'\n    },\n    code: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        margin: '1rem'\n    }\n});\n\nconst Login = ({ user }) => {\n    const classes = styles();\n\n    const [codeConfirmed, setCodeConfirmed] = useState(undefined);\n    if (user) {\n        return <Redirect to={ '/dashboard' } user={ user }/>\n    }\n    return (\n        <Fragment>\n            <TopBar/>\n            <div className={ classes.container }>\n                <span>The global access code is required before logging in:</span>\n                { !codeConfirmed && <ConfirmCode onConfirm={ confirmed => setCodeConfirmed(confirmed)}/> }\n                { codeConfirmed === true && <CognitoLogin/> }\n                { codeConfirmed === false && <span>Bad code!</span>}\n            </div>\n        </Fragment>\n    );\n};\n\nexport default Login;\n","import React from 'react';\nimport moment from 'moment';\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst styles = makeStyles({\n    container: props => ({\n        display: 'flex',\n        justifyContent: 'flex-start',\n        flexDirection: 'column',\n        fontStyle:  props.isFull ? 'italic' : 'normal',\n        color: props.isFull ? 'grey' : 'black'\n    }),\n    title: {\n        display: 'flex',\n        fontSize: '1rem',\n        fontWeight: 'bold'\n    },\n    date: {\n        display: 'flex',\n        fontStyle: 'italic'\n    },\n    flex: {\n        display: 'flex'\n    }\n});\n\nconst Flight = ({ flight, showAll }) => {\n    const date = moment(flight.flight_datetime);\n    const isFull = flight.passengers.length === 4;\n    const classes = styles({ isFull });\n    return (\n        <div className={ classes.container }>\n            { isFull && <div className={ classes.flex }>This flight is full!</div> }\n            <div className={ classes.title }>{ flight.origin } -> { flight.destination || 'TBD' }</div>\n            <div className={ classes.date }>{ date.format('dddd, MMMM Do YYYY') }, { date.format('h:mm:ss a') }</div>\n\n            <span className={ classes.flex }>With { showAll ? flight.passengers.map(p => p.name).join(', ') : `Aaron and ${ flight.passengers.length - 1 } other(s)`}</span>\n            { showAll && flight.cost && <div className={ classes.flex }>Cost: { flight.cost }</div>}\n        </div>\n    );\n};\n\nexport default Flight;\n","import React, { Fragment, useEffect, useState } from 'react';\nimport Flight from \"./Flight\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst styles = makeStyles({\n    container: {\n        margin: '1rem',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'flex-start'\n    },\n    headerText: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        marginBottom: '1rem',\n        fontWeight: 'bold',\n        fontSize: 'large',\n        marginLeft: '0.5rem'\n    }\n});\n\nconst UpcomingFlights = ({ user }) => {\n    const classes = styles();\n    const futureFlights = user.flights ? user.flights.filter(f => new Date(f.flight_datetime) > new Date()) : [];\n    const pastFlights = user.flights ? user.flights.filter(f => new Date(f.flight_datetime) < new Date()) : [];\n\n    return (\n        <Fragment>\n            <span className={ classes.headerText }>Your upcoming flight(s)</span>\n            <div  className={ classes.container }>\n                { futureFlights.map(f => <Flight flight={ f } key={ f.id } showAll/>) }\n                <br/><br/>\n                <span>{ pastFlights.length } flight(s) taken.</span>\n        </div>\n        </Fragment>\n    );\n};\n\nexport default UpcomingFlights;\n","import React, { useEffect, useState } from 'react';\nimport { Button, Dialog, DialogTitle, DialogContentText, DialogActions, DialogContent, Tooltip } from \"@material-ui/core\";\nimport { Alert } from '@material-ui/lab'\nimport { getJoinableFlights, joinFlight } from \"../actions/actions\";\nimport moment from 'moment';\nimport Flight from \"./Flight\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst styles = makeStyles({\n    flightContainer: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        margin: '0 1rem 2rem 1rem'\n    },\n    join: {\n        display: 'flex',\n        justifyContent: 'flex-end',\n        flexDirection: 'column',\n    },\n    soonWarning: {\n        fontStyle: 'italic',\n        color: '#ff7300'\n    },\n    left: {\n        display: 'flex',\n        flexDirection: 'column'\n    },\n    container: {\n        marginTop: '2rem'\n    },\n    headerText: {\n        display: 'flex',\n        justifyContent: 'flex-start',\n        marginBottom: '1rem',\n        fontWeight: 'bold',\n        fontSize: 'large',\n        marginLeft: '0.5rem'\n    }\n});\nconst JoinFlight = ({ flights, refreshUser, user }) => {\n    const classes = styles();\n    const upcomingFlights = getJoinableFlights(user.flights || [], flights)\n        .sort((a, b) => {\n            if (a.flight_datetime < b.flight_datetime) return -1;\n            if (a.flight_datetime > b.flight_datetime) return 1;\n            return 0;\n        });\n    const [flightToJoin, setFlightToJoin] = useState({});\n    const [showComeFlyingModal, setShowModal] = useState(false);\n    const [joinFlightError, setJoinFlightError] = useState('');\n\n    return (\n        <div className={ classes.container }>\n            <ComeFlyingModal\n                flight={ flightToJoin }\n                open={ showComeFlyingModal}\n                handleClose={ () => setShowModal(false) }\n                handleSave={ () => {\n                    setShowModal(false);\n                    joinFlight(user, flightToJoin.id).then(() => {\n                        setFlightToJoin({});\n                        refreshUser(user.email);\n                    }).catch((e) => {\n                        setJoinFlightError('Unable to join flight ' + e)\n                    });\n                }}\n            />\n            { joinFlightError }\n            <span className={ classes.headerText}>\n                Flights To Join:\n            </span>\n            {\n                upcomingFlights.map(f => {\n                    const daysUntilFlight = (new Date(f.flight_datetime) - new Date())/1000/60/60/24;\n                    const isFull = f.passengers.length === 4;\n                    return <div className={classes.flightContainer} key={ f.id }>\n                        <div className={ classes.left }>\n                            <Flight flight={f}/>\n                        </div>\n                        {\n                            daysUntilFlight < 3 && !isFull &&\n                            <div className={ classes.soonWarning }><Alert severity=\"warning\">HELP! We need { 4 - f.passengers.length } more!</Alert></div>\n                        }\n                        {\n                            daysUntilFlight <= 5 && daysUntilFlight > 3 && !isFull &&\n                            <div className={ classes.soonWarning }><Alert severity=\"info\">Happening soon, join us!</Alert></div>\n                        }\n                        {\n                            f.passengers.length < 3 && daysUntilFlight > 5 && daysUntilFlight < 10 &&\n                            <div className={ classes.soonWarning }><Alert severity=\"info\">Needs more people!</Alert></div>\n                        }\n                        <div className={classes.join}>\n                            <Tooltip title={ isFull ? 'Flight is full' : '' } arrow>\n                                <span>\n                                    <Button\n                                        color={ 'primary' }\n                                        disabled={ isFull }\n                                        onClick={() => {\n                                            setShowModal(true);\n                                            setFlightToJoin(f);\n                                        }}\n                                        variant={ 'contained' }\n                                    >\n                                    Come flying!\n                                </Button>\n                                </span>\n                            </Tooltip>\n                        </div>\n                    </div>\n                })\n            }\n        </div>\n    );\n};\n\nconst ComeFlyingModal = ({ open, handleClose, handleSave, flight }) => (\n    <Dialog\n        open={open}\n        onClose={handleClose}\n    >\n        <DialogTitle>{\"Join this flight?\"}</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                Confirm that you'd like to join this flight: { flight.origin || 'TBD' } to { flight.destination || 'TBD' }<br/>\n                { moment(flight.flight_datetime).format('dddd, MMMM Do') }\n            </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n                Nevermind\n            </Button>\n            <Button onClick={handleSave} color=\"primary\" autoFocus>\n                Join Flight\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n\nJoinFlight.defaultProps = {\n    flights: [],\n    user: {\n        flights: []\n    }\n};\n\nexport default JoinFlight;\n","// An admin can create flights (until there's an API to pull flights from FSP)\nimport React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    Input,\n    InputLabel,\n    Select,\n    MenuItem,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText, DialogActions\n} from \"@material-ui/core\";\nimport {createFlight, getAllUsers, editFlight, arraysAreEqual} from \"../actions/actions\";\nimport moment from 'moment';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { KeyboardDateTimePicker } from \"@material-ui/pickers\";\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport MomentUtils from '@date-io/moment';\n\nconst styles = makeStyles(theme => ({\n    container: {\n        display: 'flex',\n        alignItems: 'flex-start',\n        textSize: 'large',\n        fontWeight: 'bold',\n        flexDirection: 'column',\n        marginLeft: '1rem',\n        marginRight: '1rem'\n    },\n    title: {\n        textSize: 'large',\n        fontWeight: 'bold',\n        flexDirection: 'column',\n    },\n    topMargin: {\n        marginTop: '1rem',\n    },\n    input: {\n        width: '30rem'\n    }\n}));\nconst CreateFlight = ({ flight, user }) => {\n    const classes = styles();\n    const [date, setDate] = useState(new Date());\n    const [origin, setOrigin] = useState('Plymouth');\n    const [destination, setDestination] = useState('');\n    const [passengers, setPassengers] = useState([]);\n    const [allUsers, setAllUsers] = useState([]);\n    const [showCreateModal, setShowModal] = useState(false);\n    const [createFlightError, setCreateFlightError] = useState('');\n    useEffect(() => {\n        getAllUsers().then(setAllUsers);\n        if (flight) {\n            setDate(flight.flight_datetime);\n            setOrigin(flight.origin);\n            setDestination(flight.destination);\n            setPassengers(flight.passengers);\n        }\n    }, [flight]);\n    return (\n        <MuiPickersUtilsProvider utils={ MomentUtils }>\n            <div className={ classes.container }>\n                <ConfirmationModal\n                    flight={ { flight_datetime: date, origin, destination, passengers } }\n                    open={ showCreateModal}\n                    handleClose={ () => setShowModal(false) }\n                    handleSave={ () => {\n                        setShowModal(false);\n                        const f = { flight_datetime: date, origin, destination, passengers };\n                        if (flight) {\n                            editFlight({ ...f, cost: flight.cost }, flight.id);\n                        } else {\n                            createFlight(f).catch((e) => {\n                                console.error(e);\n                                setCreateFlightError('Unable to create flight')\n                            });\n                        }\n                    }}\n                />\n                { createFlightError }\n                <form noValidate autoComplete='off'>\n                    <InputLabel className={ classes.topMargin }>Datetime</InputLabel>\n                    <KeyboardDateTimePicker\n                        variant={ 'inline' }\n                        ampm={ true }\n                        value={ date }\n                        onChange={ date => setDate(date.toDate()) }\n                        onError={ console.log }\n                        disablePast={ !flight}\n                        format={ 'MM/DD/YY ha' }\n                    />\n                    <InputLabel className={ classes.topMargin }>Origin</InputLabel>\n                    <Input\n                        className={ classes.input }\n                        defaultValue={ 'Plymouth' }\n                        onChange={ e => setOrigin(e.target.value) }\n                        value={ origin }\n                    />\n                    <InputLabel className={ classes.topMargin }>Destination</InputLabel>\n                    <Input\n                        className={ classes.input }\n                        onChange={ e => setDestination(e.target.value) }\n                        value={ destination }\n                    />\n                    <InputLabel className={ classes.topMargin }>Passengers</InputLabel>\n                    <Select\n                        className={ classes.input }\n                        multiple\n                        value={ passengers }\n                        onChange={ e => setPassengers(e.target.value) }\n                        input={<Input />}\n                    >\n                        { allUsers.filter(u => u.email !== user.email).map(u => (\n                            <MenuItem key={ u.name } value={ u }>\n                                { u.name }\n                            </MenuItem>\n                        ))}\n                    </Select>\n                </form>\n                <Button\n                    disabled={ flight && origin === flight.origin && destination === flight.destination && date === flight.flight_datetime && arraysAreEqual(passengers.map(p => p.email), flight.passengers.map(p => p.email)) }\n                    onClick={ () => setShowModal(true) }\n                    variant={ 'outlined' }\n                >\n                    { flight ? 'Edit' : 'Create' } Flight\n                </Button>\n            </div>\n        </MuiPickersUtilsProvider>\n    );\n};\n\nconst ConfirmationModal = ({ open, handleClose, handleSave, flight }) => (\n    <Dialog\n        open={ open }\n        onClose={ handleClose }\n    >\n        <DialogTitle>{\"Create Flight\"}</DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                { flight.origin} to { flight.destination }<br/>\n                { moment(flight.flight_datetime).format('dddd, MMMM Do') }<br/>\n                With { flight.passengers.map(p => p.name).join(', ') || '<nobody>'}\n            </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n                Cancel\n            </Button>\n            <Button onClick={handleSave} color=\"primary\" autoFocus>\n                Confirm\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n\nexport const CreateFlightModalWrapper = ({ flight, handleClose, user, open }) => (\n    <Dialog\n        open={ open }\n        onClose={ handleClose }\n    >\n        <DialogTitle>{\"Edit Flight\"}</DialogTitle>\n        <DialogContent>\n            <CreateFlight flight={ flight } user={ user }/>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={ handleClose } color=\"primary\">\n                Cancel\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n\nexport default CreateFlight;\n","import {Button, Dialog, DialogActions, DialogContent, DialogTitle} from \"@material-ui/core\";\nimport React from \"react\";\nimport { deleteFlight } from \"../actions/actions\";\nimport moment from 'moment';\n\nexport const DeleteFlightModal = ({ flight, handleClose, open }) => (\n    <Dialog\n        open={ open }\n        onClose={ () => {\n            deleteFlight(flight.id);\n            handleClose();\n        } }\n    >\n        <DialogTitle>{ \"Delete Flight\" }</DialogTitle>\n        <DialogContent>\n            {\n                flight &&\n                <span>\n                    This flight is { moment(flight.flight_datetime).format('MM/DD/YY, hh:MM:SSa') } with { flight.passengers.map(p => p.name.split(' ')[0]).join(', ') }\n                </span>\n            }\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={ handleClose } color=\"primary\">\n                Cancel\n            </Button>\n            <Button\n                color=\"primary\"\n                onClick={ () => {\n                    deleteFlight(flight.id);\n                    handleClose();\n                } }\n            >\n                    Delete\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n","import React, { Fragment, useState } from 'react';\nimport Flight from \"./Flight\";\nimport { sortFlights } from \"../actions/actions\";\nimport { IconButton } from \"@material-ui/core\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from '@material-ui/core/Divider';\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { CreateFlightModalWrapper } from \"./CreateFlight\";\nimport {DeleteFlightModal} from \"./DeleteFlightModal\";\n\nconst styles = makeStyles({\n    actions: {\n        display: 'flex',\n        alignItems: 'center'\n    },\n    flightContainer: {\n        display: 'flex',\n        justifyContent: 'space-between'\n    }\n});\n\nconst AllFlights = ({ flights, user }) => {\n    const classes = styles();\n    const [flightToDelete, setFlightToDelete] = useState(undefined);\n    const [flightToEdit, setFlightToEdit] = useState(undefined);\n    const pastFlights = sortFlights(flights.filter(f => new Date(f.flight_datetime) < new Date()));\n    const futureFlights = sortFlights(flights.filter(f => new Date(f.flight_datetime) > new Date()));\n    return (\n        <div>\n            <span>All Past Flights:</span>\n            <CreateFlightModalWrapper\n                flight={ flightToEdit }\n                user={ user }\n                open={ !!flightToEdit }\n                handleClose={ () => setFlightToEdit(undefined) }\n            />\n            <DeleteFlightModal\n                flight={ flightToDelete }\n                handleClose={ () => setFlightToDelete(undefined) }\n                open={ !!flightToDelete }\n            />\n            { pastFlights\n                .map(f =>\n                    <Fragment>\n                        <Divider/>\n                        <div className={ classes.flightContainer }>\n                            <Flight flight={f} key={ f.id } showAll={ true }/>\n                            <div className={ classes.actions }>\n                                <IconButton onClick={ () => setFlightToEdit(f) }><EditIcon/></IconButton>\n                                <IconButton onClick={ () => setFlightToDelete(f) }><DeleteIcon/></IconButton>\n                            </div>\n                        </div>\n                    </Fragment>\n            ) }\n            <hr/>\n            <span>All Upcoming Flight(s)</span>\n            { futureFlights.filter(f => new Date(f.flight_datetime) > new Date()).map(f =>\n                <Fragment>\n                    <Divider/>\n                    <div className={ classes.flightContainer }>\n                        <Flight flight={ f } key={ f.id } showAll={ true }/>\n                        <div className={ classes.actions }>\n                            <IconButton onClick={ () => setFlightToEdit(f) }><EditIcon/></IconButton>\n                            <IconButton onClick={ () => setFlightToDelete(f) }><DeleteIcon/></IconButton>\n                        </div>\n                    </div>\n                </Fragment>\n            ) }\n        </div>\n    );\n};\n\nexport default AllFlights;\n","import React from 'react';\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst styles = makeStyles({\n    root: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        width: '100%'\n    }\n});\nconst User = ({ user }) => {\n    console.log(user.admin)\n    const classes = styles();\n    return (\n        <div className={ classes.root }>\n            { user.admin && <span>(Administrator)</span> }\n            <span>{ user.name }</span>\n            <span>{ user.email }</span>\n            <span>{ user.flights.length } total flights</span>\n            <span>{ user.weight || '?' }lbs</span>\n        </div>\n\n    );\n};\n\nexport default User;\n","//admin view of all users\n// An admin can create flights (until there's an API to pull flights from FSP)\n\nimport React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogContentText, DialogActions, List, ListItem\n} from \"@material-ui/core\";\nimport {addFlightDataToUser, getAllUsers} from \"../actions/actions\";\nimport User from \"./User\";\nimport UpcomingFlights from \"../flights/UpcomingFlights\";\n\nconst Users = ({ flights }) => {\n    const [allUsers, setAllUsers] = useState([]);\n    const [showUserModal, setShowModal] = useState(false);\n    const [selectedUser, setSelectedUser] = useState({});\n    useEffect(() => {\n        getAllUsers().then(setAllUsers);\n    }, []);\n\n    return (\n        <div>\n            <b><i>All Users</i></b>\n            <UserViewModal\n                flights={ flights }\n                user={ selectedUser }\n                open={ showUserModal}\n                handleClose={ () => setShowModal(false) }\n            />\n            <List>\n                { allUsers.sort((a, b) => {\n                    if (a.name < b.name) return -1;\n                    if (a.name > b.name) return 1;\n                    return 0;\n                }).map(u =>\n                    <ListItem\n                        button\n                        disabled={ u.admin }\n                        onClick={ () => {\n                            if (!u.admin) {\n                                setSelectedUser(u);\n                                setShowModal(true);\n                            }\n                        }}\n                    >\n                        <User user={ u }/>\n                    </ListItem>\n                )}\n            </List>\n        </div>\n    );\n};\n\nconst UserViewModal = ({ flights, open, handleClose, user }) => (\n    <Dialog\n        open={open}\n        onClose={handleClose}\n    >\n        <DialogTitle>Viewing <b>{ user.name }</b></DialogTitle>\n        <DialogContent>\n            <DialogContentText>\n                <UpcomingFlights user={ addFlightDataToUser(user, flights) }/>\n            </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n            <Button onClick={handleClose} color=\"primary\">\n                Cancel\n            </Button>\n        </DialogActions>\n    </Dialog>\n);\n\nexport default Users;\n","import React, { Fragment } from 'react';\nimport UpcomingFlights from \"../flights/UpcomingFlights\";\nimport JoinFlight from \"../flights/JoinFlight\";\nimport CreateFlight from \"../flights/CreateFlight\";\nimport AllFlights from \"../flights/AllFlights\";\nimport Users from \"../users/Users\";\nimport TopBar from \"./TopBar\";\nimport { Redirect } from 'react-router-dom';\n\nfunction Dashboard({ flights, getFlights, refreshUser, user }) {\n    console.log(user)\n    if (!user) {\n        return <div>Loading</div>\n    }\n    if (user && !user.access_confirmed) {\n        return <Redirect to={ '/access_check' } user={ user }/>\n    }\n\n    return (\n        <div>\n            <TopBar user={ user }/>\n            { !user.admin &&\n                <Fragment>\n                    <br/><br/>\n                    <UpcomingFlights user={user}/>\n                    <br/>\n                    <JoinFlight flights={ flights } refreshUser={ refreshUser } user={user}/>\n                </Fragment>\n            }\n            <br/>\n            { user.admin === true &&\n                <Fragment>\n                    <div>Manually Add Flight</div>\n                    <CreateFlight user={ user }/>\n                    <hr/>\n                    <AllFlights flights={ flights } user={ user }/>\n                    <hr/>\n                    <Users flights={ flights }/>\n                </Fragment>\n            }\n        </div>\n    );\n}\n\nDashboard.defaultProps = {\n    flights: []\n};\n\nexport default Dashboard;\n","import React from 'react';\nimport { Link } from \"react-router-dom\";\n\nconst LoggedOut = () => (\n        <div>\n            Successfully logged out.\n            <div><Link to={ '/' }>Return to login</Link></div>\n        </div>\n);\n\nexport default LoggedOut;\n","import React, { Fragment, useState } from 'react';\nimport { Button, Input } from \"@material-ui/core\";\nimport { confirmUser } from \"../actions/actions\";\nimport { Redirect } from 'react-router-dom';\nconst AccessCheck = ({ refreshUser, user }) => {\n    const [code, setCode ] = useState('');\n    const [userConfirmed, setConfirmed] = useState(false);\n    if (!user) {\n        return <Redirect to={ '/' }/>;\n    }\n    if (userConfirmed) {\n        return <Redirect to={ '/' }/>;\n    }\n    return (\n        <Fragment>\n            <div>Access check for { user && user.name }</div>\n            <Input onChange={ e => setCode (e.target.value) }/>\n            <Button\n                onClick={ () =>\n                    confirmUser(user, code)\n                        .then(() => {\n                            refreshUser(user.email).then(() => setConfirmed(true));\n                        })\n                        .catch(e => console.error(e))\n                }\n            >\n                Confirm\n            </Button>\n        </Fragment>\n    )\n};\n\nexport default AccessCheck;","import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport { Switch, Route, BrowserRouter as Router, useLocation } from 'react-router-dom';\nimport Login from \"./login/Login\";\nimport Dashboard from \"./dashboard/Dashboard\";\nimport LoggedOut from \"./login/LoggedOut\";\nimport AccessCheck from \"./users/AccessCheck\";\nimport { addFlightDataToUser, getAllFlights, getUser } from \"./actions/actions\";\n\nconst AppNR = () => {\n    // Set base URL on app bootstrap\n    axios.defaults.baseURL = 'https://u61sge0e1j.execute-api.us-east-1.amazonaws.com';\n    const [ user, setUser ] = useState(undefined);\n    const [flights, setFlights] = useState([]);\n    const location = useLocation();\n    const updateUser = (email, userToMutate={}) => getUser(email).then(u => {\n        const updatedUser = { ...userToMutate, ...u };\n        setUser(updatedUser);\n        if (flights.length > 0) {\n            setUser(addFlightDataToUser(updatedUser, flights))\n        } else {\n            setUser(updatedUser);\n        }\n        return Promise.resolve({ ...userToMutate, ...u });\n\n    });\n    const updateFlights = () => getAllFlights().then(res => {\n        setFlights(res.data.Items);\n        return Promise.resolve(res.data.Items);\n    });\n    const updateUserWithFlights = (email, userToMutate={}) => {\n      const userPromise = updateUser(email, userToMutate);\n      const flightPromise = updateFlights();\n      return Promise.all([userPromise, flightPromise])\n          .then((reses) => {\n              setUser(addFlightDataToUser(reses[0], reses[1]))\n          });\n    };\n    // When URL hash changes, likely means a successful login\n    useEffect(() => {\n        try {\n            const re = /id_token=([^&]+)&|$/;\n            const matches = location.hash.match(re);\n            const authToken = matches && matches.length > 1 ? matches[1] : undefined;\n            if (authToken) {\n                axios.defaults.headers.common['Authorization'] = authToken;\n                const user = JSON.parse(atob(authToken.split('.')[1]));\n                updateUserWithFlights(user.email, user).catch(e => console.error(e));\n            }\n        } catch (e) {\n            console.error(e);\n        }\n    }, [location.hash]);\n    return (\n    <div className=\"App\">\n        <Switch>\n            <Route path={ '/' } exact render={ (props) => <Login { ...props } user={ props.user || user }/> }/>\n            <Route\n                path={ '/access_check' }\n                render={ (props) =>\n                    <AccessCheck\n                        {...props }\n                        refreshUser={ updateUser }\n                        user={ props.user || user }\n                    />\n                }\n            />\n            <Route\n                path={ '/dashboard' }\n                render={\n                    (props) =>\n                        <Dashboard\n                            { ...props }\n                            flights={ flights }\n                            getFlights={ updateFlights }\n                            refreshUser={ updateUser }\n                            user={ user }\n                        />\n                }\n                isPrivate\n            />\n            <Route path={ '/logout' } component={ LoggedOut } />\n        </Switch>\n    </div>\n  );\n};\n\nconst App = () => <Router><AppNR/></Router>;\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}